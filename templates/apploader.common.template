#!/usr/bin/env bash

{% if buildtype != "release" %}
set -x
{% endif %}
set -e

# Export distro-specific paths (typically `PYTHONPATH` and `PKG_CONFIG_PATH`)
{% block path %}{% endblock %}

# Note: default to SGX if Gramine mode (`direct`, `sgx`) wasn't specified
exec gramine-${GRAMINE_MODE:-sgx} /gramine/app_files/entrypoint \
    {% if insecure_args %}{{ binary_arguments | map('shlex_quote') | join(' ') }} \
    "${@}"{% endif %}
